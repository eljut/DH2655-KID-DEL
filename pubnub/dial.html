<!-- dial.html -->

<!-- Video Output Zone -->
<div id="inVideo"> Making a Call </div>
<div id="outVideo"></div>
<div id="snap"></div>

<!-- Libs and Scripts -->
<script src="https://cdn.pubnub.com/pubnub.min.js"></script>
<script src="https://stephenlb.github.io/webrtc-sdk/js/webrtc.js"></script>
<script>(function(){
    // ~Warning~ You must get your own API Keys for non-demo purposes.
    // ~Warning~ Get your PubNub API Keys: https://www.pubnub.com/get-started/
    // The phone *number* can by any string value
    var phone = PHONE({
        number        : '016358127',
        publish_key   : 'pub-c-71ef7cc3-cbba-4681-a7a0-0f04c90d2ece',
        subscribe_key : 'sub-c-baf5124e-b619-11e6-b697-0619f8945a4f',
        ssl           : true
    });

    // As soon as the phone is ready we can make calls
    phone.ready(function(){

        // Dial a Number and get the Call Session
        // For simplicity the phone number is the same for both caller/receiver.
        // you should use different phone numbers for each user.
        var session = phone.dial('1234');
        var photo = phone.snap();
        $('#snap').append(photo.image);

    });

    // When Call Comes In or is to be Connected
    phone.receive(function(session){

        // Display Your Friend's Live Video
        session.connected(function(session){
            PUBNUB.$('inVideo').appendChild(session.video);
        });

    });

})();</script>
